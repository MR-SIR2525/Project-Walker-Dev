/**
* Hello, u're looking to steal my code, good luck!
* If I were you I would at least ask permission before that,
* I would be happy instead of you stealing my code and having to take drastic measures.
* Well, thank you, Gabriel Aplok.
*/

const _0x1bdaa1=_0x3ce1;function _0x3ce1(_0x3a22f0,_0xd305fb){const _0x328b47=_0x328b();return _0x3ce1=function(_0x3ce150,_0x7e4ec8){_0x3ce150=_0x3ce150-0x7f;let _0x21d3a0=_0x328b47[_0x3ce150];return _0x21d3a0;},_0x3ce1(_0x3a22f0,_0xd305fb);}(function(_0x291be9,_0x328bf2){const _0x193a85=_0x3ce1,_0x275318=_0x291be9();while(!![]){try{const _0x1ecc1e=parseInt(_0x193a85(0x8c))/0x1*(-parseInt(_0x193a85(0x85))/0x2)+parseInt(_0x193a85(0xb1))/0x3*(parseInt(_0x193a85(0xa8))/0x4)+parseInt(_0x193a85(0xa1))/0x5+parseInt(_0x193a85(0x99))/0x6*(parseInt(_0x193a85(0x92))/0x7)+parseInt(_0x193a85(0xa2))/0x8+-parseInt(_0x193a85(0x83))/0x9+-parseInt(_0x193a85(0xb6))/0xa;if(_0x1ecc1e===_0x328bf2)break;else _0x275318['push'](_0x275318['shift']());}catch(_0x245eb4){_0x275318['push'](_0x275318['shift']());}}}(_0x328b,0xa8624));import{system,EntityComponentTypes,Player,EntityDamageCause,EquipmentSlot}from'@minecraft/server';function _0x328b(){const _0x163d1f=['860mm','isSneaking','damage','typeId','50ae','10052271JndqEF','getEquipment','4846TtfGpb','12gauge','Equippable','getComponent','currentValue','entityAttack','556mm','421McrdrX','category','nameTag','getEntityHit','location','545mm','235165qqiYrJ','RPG-7','\x22},\x20{\x22text\x22:\x20\x22','override','dimension','bullet.impact.flesh','\x22}]}}]}','90bXuzcU','entity','Head','chest','run','Feet','Chest','hasTag','2620070KFyBXa','10344536AvaJJq','Legs','Offhand','shield_blocking','applyDamage','Mainhand','44488DCpdRq','helmet','triggerEvent','value','minecraft:shield','equipments','isValid','push','762mm','249JvYDzN','bullet_','792mm','pw:add_hitmark','45acp','4174300MjCMQi'];_0x328b=function(){return _0x163d1f;};return _0x328b();}import{playSound}from'../util';class BulletDamage{constructor(_0xefe2da,_0x391c39){const _0x10317e=_0x3ce1;this['caliber']=_0xefe2da,this[_0x10317e(0x80)]=_0x391c39;}}class ArmorProtection{constructor(_0x31f1e9,_0x56ab3c){const _0x22204e=_0x3ce1;this[_0x22204e(0x8d)]=_0x31f1e9,this[_0x22204e(0xab)]=_0x56ab3c;}}const DAMAGE={'bullet_1':new BulletDamage('9mm',0x7),'bullet_2':new BulletDamage(_0x1bdaa1(0xb5),0xa),'bullet_3':new BulletDamage(_0x1bdaa1(0x82),0xc),'bullet_4':new BulletDamage('57mm',0x6),'bullet_5':new BulletDamage(_0x1bdaa1(0x91),0x8),'bullet_6':new BulletDamage(_0x1bdaa1(0x8b),0x9),'bullet_7':new BulletDamage(_0x1bdaa1(0xb0),0xb),'bullet_8':new BulletDamage(_0x1bdaa1(0xb3),0xc),'bullet_9':new BulletDamage(_0x1bdaa1(0x86),0x8),'bullet_10':new BulletDamage(_0x1bdaa1(0xb7),0x16),'bullet_11':new BulletDamage(_0x1bdaa1(0x93),0x64)},ARMOR_PROTECTION={'pw:helmet_bicycle':new ArmorProtection(_0x1bdaa1(0xa9),0.16),'pw:helmet_military':new ArmorProtection(_0x1bdaa1(0xa9),0.24),'pw:helmet_motorcycle':new ArmorProtection('helmet',0.32),'pw:helmet_spetsnaz':new ArmorProtection(_0x1bdaa1(0xa9),0.34),'gabrielaplok:vest_assault':new ArmorProtection('chest',0.48),'gabrielaplok:vest_field':new ArmorProtection(_0x1bdaa1(0x9c),0.42),'gabrielaplok:vest_plate':new ArmorProtection('chest',0.36),'gabrielaplok:vest_press':new ArmorProtection('chest',0.28)},getArmor=_0x52bc7d=>{const _0x3152fd=_0x1bdaa1,_0x31ae9f=_0x52bc7d?.[_0x3152fd(0x88)](EntityComponentTypes[_0x3152fd(0x87)]),_0x249909=[],_0xd873a3=(_0x31ae9f?.[_0x3152fd(0x84)](EquipmentSlot[_0x3152fd(0xa7)])?.[_0x3152fd(0x81)]===_0x3152fd(0xac)||_0x31ae9f?.[_0x3152fd(0x84)](EquipmentSlot[_0x3152fd(0xa4)])?.['typeId']===_0x3152fd(0xac))&&_0x52bc7d[_0x3152fd(0xa0)](_0x3152fd(0xa5));if(_0x31ae9f?.['getEquipment'](EquipmentSlot[_0x3152fd(0x9b)])?.[_0x3152fd(0x81)])_0x249909[_0x3152fd(0xaf)](_0x31ae9f?.[_0x3152fd(0x84)](EquipmentSlot[_0x3152fd(0x9b)]));if(_0x31ae9f?.[_0x3152fd(0x84)](EquipmentSlot[_0x3152fd(0x9f)])?.[_0x3152fd(0x81)])_0x249909[_0x3152fd(0xaf)](_0x31ae9f?.[_0x3152fd(0x84)](EquipmentSlot['Chest']));if(_0x31ae9f?.[_0x3152fd(0x84)](EquipmentSlot['Legs'])?.['typeId'])_0x249909['push'](_0x31ae9f?.['getEquipment'](EquipmentSlot[_0x3152fd(0xa3)]));if(_0x31ae9f?.['getEquipment'](EquipmentSlot[_0x3152fd(0x9e)])?.[_0x3152fd(0x81)])_0x249909[_0x3152fd(0xaf)](_0x31ae9f?.['getEquipment'](EquipmentSlot[_0x3152fd(0x9e)]));return{'equipments':_0x249909,'zeroAttack':_0xd873a3};},calcDamage=(_0x13a2b6,_0x14c6ce,_0x4e59c8,_0x20f90b)=>{const _0x1fc205=_0x1bdaa1,_0xd0c832=getArmor(_0x4e59c8),_0x58433a=[];let _0x317abc=0x1;for(const _0x155338 of _0xd0c832[_0x1fc205(0xad)]){const _0x1a1262=ARMOR_PROTECTION[_0x155338?.[_0x1fc205(0x81)]];_0x58433a['push'](_0x155338?.[_0x1fc205(0x81)]),_0x1a1262&&(_0x317abc-=_0x1a1262[_0x1fc205(0xab)]);}_0x14c6ce[_0x1fc205(0x7f)]&&(_0x20f90b+=1.5);let _0x1a0e96=_0x20f90b*_0x317abc;return playSound(_0x4e59c8[_0x1fc205(0x96)],_0x1fc205(0x97),_0x4e59c8[_0x1fc205(0x90)],0x14,{'volume':0.25}),_0x1a0e96<0x1&&(_0x1a0e96=0x1),{'damage':_0xd0c832['zeroAttack']?0x0:_0x1a0e96};};export const bulletEntityImpact=async _0x2ac655=>{const _0x2c3542=_0x1bdaa1;system[_0x2c3542(0x9d)](()=>{const _0x393a15=_0x2c3542,_0x410372=_0x2ac655['source'],_0x54cc9a=_0x2ac655['projectile'];if(!_0x54cc9a||!_0x54cc9a[_0x393a15(0xae)]())return;if(_0x54cc9a['typeId']!='pw:bullet')return;const _0x4ed430=_0x2ac655[_0x393a15(0x8f)]();if(!_0x4ed430)return;const _0x31ba7c=_0x4ed430[_0x393a15(0x9a)];if(!_0x31ba7c||!_0x31ba7c['isValid']()||!_0x31ba7c[_0x393a15(0x81)])return;const _0x5d1e84=_0x54cc9a[_0x393a15(0x88)](EntityComponentTypes['Variant'])?.[_0x393a15(0xab)];if(!_0x5d1e84)return;const _0x3e81e8=DAMAGE[_0x393a15(0xb2)+_0x5d1e84];if(!_0x3e81e8)return;let _0xac1749=_0x31ba7c,_0x2ff2cd=calcDamage(_0x54cc9a,_0x410372,_0xac1749,_0x3e81e8[_0x393a15(0x80)]);if(_0xac1749[_0x393a15(0xa6)](_0x2ff2cd[_0x393a15(0x80)],{'cause':_0x410372 instanceof Player?EntityDamageCause[_0x393a15(0x95)]:EntityDamageCause[_0x393a15(0x8a)],'damagingEntity':_0x410372,'damagingProjectile':_0x54cc9a})){const _0x22bdbf=_0xac1749[_0x393a15(0x88)](EntityComponentTypes['Health'])?.[_0x393a15(0x89)];_0x22bdbf<0x1&&_0xac1749 instanceof Player&&_0x410372 instanceof Player&&_0x410372['runCommand']('tellraw\x20@a\x20{\x22rawtext\x22:\x20[{\x22translate\x22:\x20\x22death.attack.bullet\x22,\x20\x22with\x22:\x20{\x22rawtext\x22:\x20[{\x22text\x22:\x20\x22'+_0x410372['nameTag']+_0x393a15(0x94)+_0xac1749[_0x393a15(0x8e)]+_0x393a15(0x98));}if(_0x410372&&_0x410372 instanceof Player)_0x410372[_0x393a15(0xaa)](_0x393a15(0xb4));});};